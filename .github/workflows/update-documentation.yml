name: Documentation Update

on:
  repository_dispatch:
    types: [update-docs]

jobs:
  update-documentation:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout Documentation Repository
      uses: actions/checkout@v2

    - name: Create Documentation Folder
      run: |
        repo_name="${{ github.event.client_payload.repo_name }}"
        mkdir -p "docs/${repo_name}"
        echo "This documentation was triggered by ${repo_name}" > "docs/${repo_name}/README.md"

    - name: Commit and Push Changes
      run: |
        git config --global user.email "github-actions[bot]@users.noreply.github.com"
        git config --global user.name "GitHub Actions"
        git add .
        git commit -m "Added documentation for ${{ github.event.client_payload.repo_name }}"
        git push
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}